= Site Cheribou - Documentation Technique 
_Réalisé par Anthony Cabrillac, Victor Thompson, Yann Guillevic, Léo Douville, Shiyu Hu

toc::[]

== I - Présentation rapide du site
L’entreprise Cheribou souhaitant re-conceptualiser son site internet pour que celui-ci soit le plus attractif possible afin d’augmenter le nombre de clients inscrits et d’améliorer le nombre de ventes en ligne. De plus, Cheribou a la volonté et les ressources pour se développer à l'international afin degagner en notoriété et en visibilité. Cheribou cherche à s’introduire et à s’exporter sur les marchés Allemand et Américain. Mais le site internet actuel est désuet et n’est pas adapté à pour une future expansion internationale. Une version anglaise du site devra donc être créée afin de s’adapter au nouveau type de clients. Le nouveau site web devra être adapté pour des enfants, adolescents et jeunes adultes, être simple à parcourir et être sécurisé pour permettre une bonne utilisation du site web et une fidélisation de la clientèle.

=== 1. Explications du use case global

Voici le use case général du nouveau site de cheribou:

image::../V2/images/gauche.png[UC V2]
image::../V2/images/droite.png[UC V2]

==== 1.1 Types d'utilisateurs et spécificités

Il y a trois types d'utilisateurs subsistent : l'admin, les clients ainsi que les visiteurs.

Le simple visiteur, lui pourra visité le site(voir les produits, les details des produit, etc), contacter via un formulaire un administrateur, il aura la possibilité de se crée un compte ou de se connecter pour devenir un client.

Pour un client, il peut effectué les même actions qu'un visiteur et peut modifié sont profile, visualiser compte, ce deconnecter qui le refera devenir un visiteur, ajouté des articles dans panier qu'il pourra valider par la suite.

En tant qu'administrateur, celui-ci possède un espace parallèle au site qui lui permettra de modifier des articles. Il pourra aussi ajouter des stocks de produits, lire les messages envoyé par les clients ou les visiteurs..


=== 2. Explications du diagramme de classe des données globales

image::../V2/images/dcv2.PNG[DC V2]

==== 2.1 Fonctionnalités du chef d'agence

==== 2.2 Fonctionnalités du guichetier

== II - Architecture

=== 1. Architecture générale

Pour les visiteurs ou clients le site est simple d'utilisation, reste relativement facile à comprendre et respecte la règle des trois clics.


==== 1.2 Serveurs
Le site est héberger sur un serveur Apache deployé dans un serveur de l'IUT de Blagnac.

Le site possède une base de données propre à ses caractéristiques. Elle permet de conserver l'ensemble des informations relatives au clients et produits telles que : +
____
• Les clients ; 
• Les produits ; 
• Les promotions ;
• Les commandes ;
• Les paniers des clients ;
____

=== 2. Ressources externes et rôles



=== 3. Structuration en packages de l'application

La structuration du site est répartie en plusieurs packages que voici : 

[source]
----
├── public_html
        ├── index.php
        ├── Compte.php
        ├── admin.php
        ├── AjoutPanierBonbon.php
        ├──	AjoutPanierRecip.php
        ├──	bonbon.php
	├──	choixP.php
	├──	contact.php
	├──	detailBonbon.php
	├──	detailRecipient.php
	├──	InfosCompte.php
	├──	Nouveaute.php
	├──	panier.php
	├──	produitadmin.php
	├──	Promotion.php
	├──	recipient.php
	├──	stockadmin.php
        └──include  
         	  ├── admn.css
           	  ├── bonbon.css
           	  ├── Boutique.css
	   	  ├── choixP.css
	   	  ├── Compte.css
	   	  ├── contact.css
	   	  ├── datailBonbon.css
	   	  ├── detailRecipient.css
	   	  ├── footer.css
	   	  ├── header.css
	   	  ├── headeradmin.css
	   	  ├── index.css
	   	  ├── infosCompte.css
	   	  ├── Nouveaute.css
	    	  ├── padmin.css
	   	  ├── promotion.css
	     	  ├── Connect.inc.php
	   	  ├── Deconnexion.php
	   	  ├── footer.php
	   	  ├── header.php
	   	  ├── headeradmin.php
	   	  ├── modifierCompte.php
	   	  ├── suppbobonadmin.php
	   	  ├── supprecipadmin.php
	   	  ├── supprimerbonbon.php
	   	  ├── supprimerRecipient.php
	   	  ├── traitFormConnexion.php
	   	  ├── traitFormCreerCompte.php
	   	  ├── traitNvBonbon.php
		  ├── traitNvRecip.php
		  ├── traitPanier.php
		  └──Images
    			├── imgBonbons
			├── ...


----
Cette arborescence a été choisi par les membres de l'equipes pour la facilité de compréhension qu'elle apporte.
=== 4. Éléments à connaître

Comme vous pouvez l'observer, le code de du site est fourni dans 1 package principal étant ``public.html`` et dont celui-ci contient les pages principales .
Vous pouvez observez que les fichier n'ont pas toute la meme extension: +

____
• php ; 
• css; 
____



==== 4.1 Spécificités

Concernant le type ``php``, celui-ci est utiliser pour mettre les éléments et les rendre dynamique avec la base de données. 

Le type ``css`` est utilisé pour la mise en forme des éléments en ajoutant ou modifiant un style  d'un élément. Chaque page php sa propre page css pour la mettre en page

==== 4.2 Éléments nécessaires à la mise en oeuvre du développement

Par la suite, il lui est nécessaire de posséder un IDE (environnement de développement intégré) pour tout simplement pouvoir observer le code et interagir avec. Visual Studio Code ou encore SublimeText sont des IDE que le développeur peut utiliser. 



== III - Explications des fonctionnalités

=== 1 Visiteur

==== 1.2 Créer un nouveau compte client.
Le visiteur aura la possibilité de crée sont compte via un formulaire sur la page "compte.php".

image::images/FormCreerCompte.png[3.2]

Ce formulaire et ensuite envoyé a la  page "traitFormCreerCompte.php"

image::images/traitFormCreerCompte.png[0]

Cette page verifie d'abord si les champs sont remplie.
Pas besoin de faire de regex sur les adresses mail car le type mail le fait automatiquement.
image::images/traitformcreercompte1.png[1]

Si ces champs sont remplie : +
____
• include le fichier qui permet de se connecter a la base de données; 
• Verifie si l'addresse mail est unique. ; 
____

Si l'addresse mail n'est pas une alert s'affiche et nous redirige vers la page de creation.

image::images/traitformcreercompte3_1.png[3.1]

Si l'adresse est unique:+
____
• Verifie si le mot de passe et la comfirmation de mot de passe sont identique.; 
• Verifie si l'addresse mail et la comfirmation d'email sont identique. ; 
____


Si l'un des deux n'est pas verifier ou les deux, une alert s'affiche avec les champs où il y avait des erreur en nous redirigeant vers la page de creation d'un compte.
 

image::images/traitformcreercompte3_2.png[3.2]

Si les champs sont identique, crypte le mot de passe avec la fonction "password_hash()" et insert le nouveau compte dans la base de données avec les données saissie.

==== 1.3 Se connecter.
Pour la connexion a un compte, cela se fait via au formulaire de la page Compte.php et est traiter sur la  page "traitFormConnexion".


===Spécidication de code
Comme vous avez pu le constater la connexion et de creation d'un compte  se font tous sur la meme page, "Compte.php" ceci est fait grace un lien qui rappel la page avec une valeur envoyer dans l'URL avec le  nom "acces" si il est égale à login alors le formulaire de connexion s'affiche s'il est égale a register alors la page affiche le formulaire de création d'un compte.
=== 2 Client

==== 2.1 Ajouter au panier.

Un client peut ajouter un produit dans sont panier avec une quantité reliée.

===== Partie du use case conforme

image::/V1/images/modifinfoclient.PNG[Modifier info client]

===== Partie du diagramme de classe conforme

image::/V1/images/clientdc.PNG[Modifier info client]

Cette tâche n'inclut seulement qu'une classe dans le diagramme de classes V1 : la classe ``Client``.
Cette classe est, de ce fait, dédiée à la modification des informations d'un client et par conséquent, à la mise à jour des données sur la base de données.




==== 2.2 Consulter sont compte.

Un client peut consulter les informations de sont compte.
==== 2.3 Modifier sont compte.
Un client peut modifier les informations de sont compte.

==== 2.4 Déconnexion.
Un client peut ce déconnecter de sont compte.

=== 3 Administrateur
Quand l'administrateur se connectera sur sont compte il sera directement rediriger vers un espace dedier a l'adminnistrateur qui lui permettra:+
___
• Rajouter des stoks de produit; 
• Gérer les produits;
• Voir les commandes des clients;
___

==== 3.1 Ajouter des stocks de produits


===== Partie du use case conforme

image::/V1/images/modifinfoclient.PNG[Modifier info client]

===== Partie du diagramme de classe conforme

image::/V1/images/clientdc.PNG[Modifier info client]

Cette tâche n'inclut seulement qu'une classe dans le diagramme de classes V1 : la classe ``Client``.
Cette classe est, de ce fait, dédiée à la modification des informations d'un client et par conséquent, à la mise à jour des données sur la base de données.




==== 3.2 Créer un nouveau compte client.

==== 3.3 Se connecter.

==== 3.4 Clôturer un compte.
