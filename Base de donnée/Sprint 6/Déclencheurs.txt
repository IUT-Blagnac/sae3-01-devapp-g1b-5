--trigger nb bonbon dans un panier--

create or replace TRIGGER maj_NBarticle_bonbon
AFTER INSERT OR UPDATE OR DELETE
ON CONTIENTBONBON
FOR EACH ROW
BEGIN
    IF (INSERTING OR UPDATING) THEN
        UPDATE PANIER
        SET NBPRODUIT = NBPRODUIT + 1
        WHERE IDPANIER = :NEW.IDPANIER; 
    END IF;
    
    IF (DELETING OR UPDATING) THEN
        UPDATE PANIER
        SET NBPRODUIT = NBPRODUIT - 1
        WHERE IDPANIER = :OLD.IDPANIER; 
    END IF;
END;


--trigger nb recipient dans un panier--

create or replace TRIGGER maj_NBarticle_recipient
AFTER INSERT OR UPDATE OR DELETE
ON CONTIENTRECIPIENT
FOR EACH ROW
BEGIN
    IF (INSERTING OR UPDATING) THEN
        UPDATE PANIER
        SET NBPRODUIT = NBPRODUIT + 1
        WHERE IDPANIER = :NEW.IDPANIER; 
    END IF;
    
    IF (DELETING OR UPDATING) THEN
        UPDATE PANIER
        SET NBPRODUIT = NBPRODUIT - 1
        WHERE IDPANIER = :OLD.IDPANIER; 
    END IF;
END;