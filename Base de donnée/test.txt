CREATE OR REPLACE TRIGGER MAJ_QTE_BONBON
FOR INSERT OR UPDATE OR DELETE ON CONTIENTBONBON COMPOUND TRIGGER

TYPE type_enreg_emp IS RECORD (
VidB BONBONS.IDB%TYPE
);

TYPE typeTab_enreg_emp IS TABLE OF type_enreg_emp INDEX BY PLS_INTEGER;

monTab_Emp typeTab_enreg_emp;

AFTER EACH ROW IS
BEGIN
monTab_Emp(monTab_Emp.COUNT + 1).VidB := :NEW.IDB;
END AFTER EACH ROW; 

AFTER STATEMENT IS 
BEGIN
    IF(INSERTING OR UPDATING) THEN
        FOR i IN 1 .. monTab_Emp.COUNT LOOP 
        IF(:NEW.IDB =  monTab_Emp (i).IDB) THEN
            UPDATE CONTIENTBONBON
            SET QUANTITEKG = QUANTITEKG + :NEW.QUANTITEKG;
        END IF;
        END LOOP;
    END IF;
END AFTER STATEMENT;     
END;
/
